<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Login - Route Planner</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-100 h-screen flex items-center justify-center">

  <div class="bg-white p-8 rounded-xl shadow-lg w-full max-w-md">

      <header class="flex items-center justify-center mb-6 text-blue-700 gap-2">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-10 h-10" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M9 20l-5.447-2.724A2 2 0 013 15.382V6a2 2 0 012-2h1m5 0h1a2 2 0 012 2v7.382a2 2 0 01-1.553 1.894L9 20zm0 0h6" />
        </svg>
        <h1 class="text-3xl font-bold tracking-wide">Route Planner</h1>
      </header>

      <h2 class="text-xl font-semibold text-gray-800 mb-4 text-center">Acesso ao Sistema</h2>

      <label class="block text-gray-700 font-medium mb-1">Usu치rio</label>
      <input id="username"
             class="w-full p-3 border rounded-lg mb-4 focus:ring-2 focus:ring-blue-500"
             placeholder="Digite seu usu치rio" />

      <label class="block text-gray-700 font-medium mb-1">Senha</label>
      <input id="password"
             type="password"
             class="w-full p-3 border rounded-lg mb-6 focus:ring-2 focus:ring-blue-500"
             placeholder="Digite sua senha" />

      <button onclick="login()"
              class="w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 rounded-lg shadow-md transition">
          Entrar
      </button>

      <p id="errorMsg" class="text-red-600 text-center mt-4 hidden">
        Usu치rio ou senha inv치lidos.
      </p>

  </div>


<script>
  const BACKEND_URL = "https://prototype-solution.onrender.com";
  async function login() {
    const username = document.getElementById("username").value.trim();
    const password = document.getElementById("password").value.trim();
    const errorMsg = document.getElementById("errorMsg");

    errorMsg.classList.add("hidden");

    const res = await fetch("/login", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ username, password })
    });

    const data = await res.json();

    if (data.access_token) {
      localStorage.setItem("token", data.access_token);
      window.location.href = "/";
    } else {
      errorMsg.classList.remove("hidden");
    }
  }
</script>

</body>
</html>
